compile:
  override:
    - bundle exec jekyll build --verbose

test:
  override:
    - echo "Nothing to do"

deployment:
  live:
    branch: /.*/    # TODO: should only match develop
    commands:
      - curl https://raw.githubusercontent.com/quartictech/circleci-utils/develop/circleci-gcloud-login | bash -s -- --no-docker
      - sudo /opt/google-cloud-sdk/bin/gcloud compute copy-files --zone europe-west1-b _site/ ${GCLOUD_WEB_INSTANCE}:/opt/quartic/website

general:
  artifacts:
    - _site/
